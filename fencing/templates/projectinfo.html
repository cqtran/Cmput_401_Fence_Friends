{% extends "base.html" %}
{% block content %}

<h1>Project Details</h1>

<div class="container">
	<img src="../static/images/Mock Drawing Image.png" height = 250 width = 350>
	<p id="status"></p>
	<p id="address"></p>
	<p id="start_date"></p>
	<p id="end_date">End Date: Ongoing</p>
    <p id="savednote">Note</p>

</div>

<!--
	TODO: Group this form into Modify Project (UC6)
	<form method = "post"  action="{{url_for('projectinfo') }} ">
    <input class="form-control" type="hidden" name="projectvalue" id="projectvalue" />
	<textarea class="form-control" id="note" name="note" rows="3" cols="30" placeholder="Save or update note"></textarea>
	<br>
	<input class="btn btn-primary btn-block" type="submit" value = "Save Note"/>
</form>
-->
<div class="row" id = 'projectPictures'></div>

<form method = "post" action="{{ url_for('uploadPicture') }}" enctype=multipart/form-data >
	<input class="form-control" type="hidden" name="proj_id" id="projectvalue" />
  <input type="file" name="picture" accept="image/*">
  <input type="submit" value = "Upload picture">
</form>

<script>
function projectClicked(proj) {
	document.getElementById('status').innerHTML = 'Status: ' + proj[0].status_name;
	document.getElementById('address').innerHTML = 'Address: ' + proj[0].address;
	document.getElementById('start_date').innerHTML = 'Start Date: ' + proj[0].start_date;

	// SAVES PROJECT ID AND SENDS TO '/projectinfo'
	document.getElementById('projectvalue').setAttribute('value', proj[0].project_id);

	if (proj[0].end_date != null) {
		document.getElementById('end_date').innerHTML = 'End Date: ' + proj[0].end_date;
		}
    if (proj[0].note != null) {
    document.getElementById('savednote').innerHTML = proj[0].note;
    }

}

function displayPictures(images, path) {
	var div = document.getElementById('projectPictures');
	if (images.length == 0) {
		var img = document.createElement('img');
		img.src =  path + 'No_picture_available.png';
		img.alt =  'No pictures available';
		img.height = '150';
		img.width = '150';
		div.appendChild(img);
	}

	for(var i = 0; i < images.length; i++) {
			// Create the list item:
			var img = document.createElement('img');
			img.src =  path + images[i].file_name;
			img.alt =  images[i].file_name + ' not found';
			img.height = '150';
			img.width = '150';
			// Add it to the list:
			div.appendChild(img);
	}

	return div
}

projectClicked({{ proj|safe }});
displayPictures({{ images|safe }}, {{ path|safe }});

</script>
{% endblock %}
